{
  "$schema": "http://json-schema.org/draft-04/schema#",
  "id": "http://justice.gov.uk/progression/courts/getCaseAtAGlance.json",
  "type": "object",
  "properties": {
    "getCaseAtAGlance": {
      "description": "Describes the case at a glance",
      "type": "object",
      "properties": {
        "caseDetails": {
          "description": "Describes the case details",
          "type": "object",
          "properties": {
            "caseURN": {
              "type": "string"
        },
            "caseStatus": {
              "type": "string"
        },
            "removalReason": {
              "type": "string"
        },
            "caseMarkers": {
          "type": "array",
          "items": {
                "type": "string"
              }
            }
          }
        },
        "prosecutorDetails": {
          "type": "object",
          "$ref": "#/definitions/prosecutorDetails"
        },
        "caagDefendants": {
          "type": "array",
          "minItems": 1,
          "items": {
            "$ref": "#/definitions/caagDefendant"
          }
        }
      }
    }
  },
  "additionalProperties": false,
  "definitions": {
    "prosecutorDetails": {
      "type": "object",
      "properties": {
        "prosecutionAuthorityReference": {
          "type": "string"
        },
        "prosecutionAuthorityCode": {
          "type": "string"
        },
        "prosecutionAuthorityId": {
          "$ref": "http://justice.gov.uk/core/courts/courtsDefinitions.json#/definitions/uuid"
        },
        "address": {
          "$ref": "http://justice.gov.uk/core/courts/address.json#"
          }
        },
      "additionalProperties": false
    },
    "caagDefendant": {
      "type": "object",
      "properties": {
        "id": {
          "$ref": "http://justice.gov.uk/core/courts/courtsDefinitions.json#/definitions/uuid"
        },
        "masterDefendantId": {
          "$ref": "http://justice.gov.uk/core/courts/courtsDefinitions.json#/definitions/uuid"
        },
        "firstName": {
          "type": "string"
        },
        "lastName": {
          "type": "string"
        },
        "address": {
          "$ref": "http://justice.gov.uk/core/courts/address.json#"
        },
        "dateOfBirth": {
          "$ref": "http://justice.gov.uk/core/courts/courtsDefinitions.json#/definitions/datePattern"
        },
        "age": {
          "type": "integer"
        },
        "nationality": {
          "type": "string"
        },
        "interpreterLanguageNeeds": {
          "type": "string"
        },
        "remandStatus": {
          "type": "string"
        },
        "defendantMarkers": {
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "caagDefendantOffences": {
          "type": "array",
          "minItems": 1,
          "items": {
            "$ref": "#/definitions/caagDefendantOffence"
          }
        },
        "representation": {
          "description": "The organisation details of the defence representation",
          "$ref": "http://justice.gov.uk/core/courts/organisation.json"
        },
        "legalAidStatus": {
          "type": "string"
        },
        "legalEntityDefendant": {
          "description": "When the defendant is a legal entity the additional legal entity specific details for the defendant",
          "$ref": "#/definitions/caagOrganisation"
        }
      },
      "required": [
        "id",
        "masterDefendantId",
        "firstName",
        "lastName"
      ],
      "additionalProperties": false
    },
    "caagDefendantOffence": {
      "type": "object",
      "properties": {
        "id": {
          "$ref": "http://justice.gov.uk/core/courts/courtsDefinitions.json#/definitions/uuid"
        },
        "offenceCode": {
          "type": "string"
        },
        "offenceTitle": {
          "type": "string"
        },
        "offenceTitleWelsh": {
          "type": "string"
        },
        "offenceLegislation": {
          "type": "string"
        },
        "offenceLegislationWelsh": {
          "type": "string"
        },
        "wording": {
          "type": "string"
        },
        "wordingWelsh": {
          "type": "string"
        },
        "startDate": {
          "$ref": "http://justice.gov.uk/core/courts/courtsDefinitions.json#/definitions/datePattern"
        },
        "endDate": {
          "$ref": "http://justice.gov.uk/core/courts/courtsDefinitions.json#/definitions/datePattern"
        },
        "count": {
          "$ref": "http://justice.gov.uk/core/courts/courtsDefinitions.json#/definitions/positiveInteger"
        },
        "allocationDecision": {
          "$ref": "http://justice.gov.uk/core/courts/allocationDecision.json"
        },
        "plea": {
            "$ref": "http://justice.gov.uk/core/courts/plea.json"
        },
        "verdict": {
            "$ref": "http://justice.gov.uk/core/courts/verdict.json"
        },
        "caagResults": {
          "description": "offence level results",
          "type": "array",
          "minItems": 1,
          "items": {
            "$ref": "#/definitions/caagResult"
          }
        },
        "custodyTimeLimit": {
          "$ref": "http://justice.gov.uk/core/courts/custodyTimeLimit.json"
        }

      },
      "required": [
        "id",
        "offenceDefinitionId",
        "offenceCode",
        "offenceTitle",
        "wording",
        "startDate"
      ],
      "additionalProperties": false
    },
    "caagResult": {
      "type": "object",
      "properties": {
        "id": {
          "$ref": "http://justice.gov.uk/core/courts/courtsDefinitions.json#/definitions/uuid"
        },
        "label": {
          "type": "string"
        },
        "caagResultPrompts": {
          "type": "array",
          "minItems": 1,
          "items": {
            "$ref": "#/definitions/caagResultPrompt"
      }
    },
        "orderedDate": {
          "$ref": "http://justice.gov.uk/core/courts/courtsDefinitions.json#/definitions/datePattern"
        },
        "lastSharedDateTime": {
          "type": "string"
        },
        "amendmentDate": {
          "$ref": "http://justice.gov.uk/core/courts/courtsDefinitions.json#/definitions/datePattern"
        },
        "amendmentReason": {
          "type": "string"
        },
        "amendedBy": {
          "type": "string"
        }
      },
      "required": [
        "id",
        "label"
      ],
      "additionalProperties": false
    },
    "caagResultPrompt": {
      "type": "object",
      "properties": {
        "label": {
          "type": "string"
        },
        "value": {
          "type": "string"
        }
        },
      "required": [
        "label",
        "value"
      ],
      "additionalProperties": false
    },
    "caagOrganisation": {
      "type": "object",
      "properties": {
        "name": {
          "type": "string"
        },
        "address": {
          "$ref": "http://justice.gov.uk/core/courts/address.json#"
        }
      },
      "required": [
        "name"
      ],
      "additionalProperties": false
    },
    "custodyEstablishment": {
      "type": "object",
      "properties": {
        "name": {
          "type": "string"
        },
        "id": {
          "$ref": "http://justice.gov.uk/core/courts/courtsDefinitions.json#/definitions/uuid"
        },
        "custody": {
          "type": "string"
        }
      },
      "additionalProperties": false,
      "required": [
        "id",
        "name",
        "custody"
      ]
    }
  }
}
