{
  "operations":    [
    {
      "operation": "shift",
      "spec": {
        "hearing": {
          "#true": "@jurisdictionType",
          "judiciary": {
            "*": {
              "judicialRoleType": {
                "judiciaryType": "judiciaryRoleTypes[]"
              }
            }
          },
          "hearingDays": {
            "*": {
              "sittingDay": "hearingDates[].iso"
            }
          },
          "prosecutionCases": {
            "*": {
              "#PROSECUTION": "prosecutionCases[&1]._case_type",
              "id": "prosecutionCases[&1].caseId",
              "@(3,boxWorkAssignedUserId)": "prosecutionCases[&1].hearings[0].boxWorkAssignedUserId",
              "@(3,boxWorkTaskStatus)": "prosecutionCases[&1].hearings[0].boxWorkTaskStatus",
              "@(2,id)": "prosecutionCases[&1].hearings[0].hearingId",
              "@(2,jurisdictionType)": "prosecutionCases[&1].hearings[0].jurisdictionType",
              "@(2,courtCentre.id)": "prosecutionCases[&1].hearings[0].courtId",
              "@(2,courtCentre.name)": "prosecutionCases[&1].hearings[0].courtCentreName",
              "@(2,type.id)": "prosecutionCases[&1].hearings[0].hearingTypeId",
              "@(2,type.description)": "prosecutionCases[&1].hearings[0].hearingTypeLabel",
              "@(2,isBoxHearing)": "prosecutionCases[&1].hearings[0].isBoxHearing"
            }
          },
          "courtApplications": {
            "*": {
              "#APPLICATION": "applications[&1]._case_type",
              "id": [
                "applications[&1].caseId",
                "applications[&1].applicationId"
              ],
              "dueDate": "applications[&1].dueDate",
              "applicationReference": "applications[&1].applicationReference",
              "applicationReceivedDate": "applications[&1].receivedDate",
              "applicationDecisionSoughtByDate": "applications[&1].decisionDate",
              "type": {
                "applicationType": "applications[&2].applicationType"
              },
              "@(3,boxWorkAssignedUserId)": "applications[&1].hearings[0].boxWorkAssignedUserId",
              "@(3,boxWorkTaskStatus)": "applications[&1].hearings[0].boxWorkTaskStatus",
              "@(2,id)": "applications[&1].hearings[0].hearingId",
              "@(2,jurisdictionType)": "applications[&1].hearings[0].jurisdictionType",
              "@(2,courtCentre.id)": "applications[&1].hearings[0].courtId",
              "@(2,courtCentre.name)": "applications[&1].hearings[0].courtCentreName",
              "@(2,type.id)": "applications[&1].hearings[0].hearingTypeId",
              "@(2,type.description)": "applications[&1].hearings[0].hearingTypeLabel",
              "@(2,isBoxHearing)": "applications[&1].hearings[0].isBoxHearing"
            }
          }
        }
      }
    },
    {
      "operation": "modify-overwrite-beta",
      "spec": {
        "hearingDates": {
          "*": {
            "iso": "=substring(@(1,iso),0,10)"
          }
        }
      }
    },
    {
      "operation": "shift",
      "spec": {
        "applications": {
          "*": {
            "@": "caseDocuments[]"
          }
        },
        "prosecutionCases": {
          "*": {
            "@": "caseDocuments[]"
          }
        },
        "hearingDates": {
          "*": {
            "@.iso": "hearingDatesIso[]"
          }
        },
        "judiciaryRoleTypes": "judiciaryRoleTypes",
        "CROWN": "CROWN",
        "MAGISTRATES": "MAGISTRATES",
        "hearingDatesIso": "hearingDatesIso"
      }
    },
    {
      "operation": "shift",
      "spec": {
        "caseDocuments": {
          "*": {
            "@": "caseDocuments[]",
            "@(2,hearingDatesIso)": "caseDocuments[&1].hearings[0].hearingDates",
            "@(2,judiciaryRoleTypes)": "caseDocuments[&1].hearings[0].judiciaryTypes",
            "@(2,CROWN)": "caseDocuments[&1]._is_crown",
            "@(2,MAGISTRATES)": "caseDocuments[&1]._is_magistrates"
          }
        }
      }
    },
    {
      "operation": "modify-overwrite-beta",
      "spec": {
        "caseDocuments": {
          "*": {
            "\\_case_type": "=toUpper",
            "\\_is_crown": "=toBoolean",
            "\\_is_magistrates": "=toBoolean"
          }
        }
      }
    },
    {
      "operation": "shift",
      "spec": {
        "caseDocuments": {
          "*": {
            "caseId": "caseDocuments[&1].caseId",
            "caseReference": "caseDocuments[&1].caseReference",
            "prosecutingAuthority": "caseDocuments[&1].prosecutingAuthority",
            "caseStatus": "caseDocuments[&1].caseStatus",
            "_case_type": "caseDocuments[&1]._case_type",
            "_is_sjp": "caseDocuments[&1]._is_sjp",
            "_is_magistrates": "caseDocuments[&1]._is_magistrates",
            "_is_crown": "caseDocuments[&1]._is_crown",
            "_is_charging": "caseDocuments[&1]._is_charging",
            "sjpNoticeServed": "caseDocuments[&1].sjpNoticeServed",

            "hearings": "caseDocuments[&1].hearings",
            "parties": "caseDocuments[&1].parties",

            "applicationId": "caseDocuments[&1].applications[&1].applicationId",
            "applicationReference": "caseDocuments[&1].applications[&1].applicationReference",
            "dueDate": "caseDocuments[&1].applications[&1].dueDate",
            "receivedDate": "caseDocuments[&1].applications[&1].receivedDate",
            "decisionDate": "caseDocuments[&1].applications[&1].decisionDate",
            "applicationType": "caseDocuments[&1].applications[&1].applicationType"
          }
        }
      }
    },
    {
      "operation": "modify-overwrite-beta",
      "spec": {
        "*": "=recursivelySquashNulls"
      }
    }
  ]


}