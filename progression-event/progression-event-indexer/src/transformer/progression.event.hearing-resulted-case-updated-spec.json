{
  "operations": [
    {
      "operation": "shift",
      "spec": {
        "prosecutionCase": {
          "id": "caseId",
          "#PROSECUTION": "_case_type",
          "caseStatus": "caseStatus",
          "prosecutionCaseIdentifier": {
            "caseURN": "caseReference",
            "prosecutionAuthorityReference": "caseReference",
            "prosecutionAuthorityCode": "prosecutingAuthority"
          },
          "defendants": {
            "*": {
              "proceedingsConcluded": "parties[&1].proceedingsConcluded",
              "pncId": "parties[&1].pncId",
              "aliases": {
                "*": {
                  "firstName": "parties[&3].aliases[&1].firstName",
                  "middleName": "parties[&3].aliases[&1].middleName",
                  "lastName": "parties[&3].aliases[&1].lastName",
                  "title": "parties[&3].aliases[&1].title",
                  "legalEntityName": "parties[&3].aliases[&1].organisationName"
                }
              },
              "offences": {
                "*": {
                  "id": "parties[&3].offences[&1].offenceId",
                  "offenceCode": "parties[&3].offences[&1].offenceCode",
                  "offenceTitle": "parties[&3].offences[&1].offenceTitle",
                  "offenceLegislation": "parties[&3].offences[&1].offenceLegislation",
                  "proceedingsConcluded": "parties[&3].offences[&1].proceedingsConcluded",
                  "dateOfInformation": "parties[&3].offences[&1].dateOfInformation",
                  "startDate": "parties[&3].offences[&1].startDate",
                  "endDate": "parties[&3].offences[&1].endDate",
                  "arrestDate": "parties[&3].offences[&1].arrestDate",
                  "chargeDate": "parties[&3].offences[&1].chargeDate",
                  "modeOfTrial": "parties[&3].offences[&1].modeOfTrial",
                  "orderIndex": "parties[&3].offences[&1].orderIndex",
                  "wording": "parties[&3].offences[&1].wording",
                  "laaApplnReference": {
                    "applicationReference": "parties[&4].offences[&2].laaReference.applicationReference",
                    "statusId": "parties[&4].offences[&2].laaReference.statusId",
                    "statusCode": "parties[&4].offences[&2].laaReference.statusCode",
                    "statusDescription": "parties[&4].offences[&2].laaReference.statusDescription"
                  }
                }
              },
              "id": "parties[&1].partyId",
              "#DEFENDANT": "parties[&1]._party_type",
              "legalEntityDefendant": {
                "organisation": {
                  "name": "parties[&3].organisationName"
                }
              },
              "personDefendant": {
                "arrestSummonsNumber": "parties[&2].arrestSummonsNumber",
                "personDetails": {
                  "title": "parties[&3].title",
                  "firstName": "parties[&3].firstName",
                  "middleName": "parties[&3].middleName",
                  "lastName": "parties[&3].lastName",
                  "dateOfBirth": "parties[&3].dateOfBirth",
                  "gender": "parties[&3].gender",
                  "nationalInsuranceNumber": "parties[&3].nationalInsuranceNumber",
                  "address": {
                    "*": "parties[&4].addressLines",
                    "postcode": "parties[&4].postCode"
                  }
                }
              }
            }
          }
        }
      }
    },
    {
      "operation": "modify-overwrite-beta",
      "spec": {
        "\\_case_type": "=toUpper",
        "caseStatus": "=toUpper",
        "prosecutingAuthority": "=toUpper",
        "\\_is_crown": [
          "=toBoolean",
          false
        ],
        "parties": {
          "*": {
            "addressLines": "=join(' ',@(1,addressLines))"
          }
        }
      }
    }
  ]
}