{
  "operations": [
    {
      "operation": "shift",
      "spec": {
        "defendant": {
          "prosecutionCaseId": "caseId",
          "proceedingsConcluded": "parties[0].proceedingsConcluded",
          "pncId": "parties[0].pncId",
          "legalEntityDefendant": {
            "organisation": {
              "name": "parties[0].organisationName"
            }
          },
          "personDefendant": {
            "arrestSummonsNumber": "parties[0].arrestSummonsNumber",
            "personDetails": {
              "@2": {
                "id": "parties[0].partyId"
              },
              "#defendant": "parties[0]._party_type",
              "title": "parties[0].title",
              "firstName": "parties[0].firstName",
              "middleName": "parties[0].middleName",
              "lastName": "parties[0].lastName",
              "dateOfBirth": "parties[0].dateOfBirth",
              "gender": "parties[0].gender",
              "nationalInsuranceNumber": "parties[0].nationalInsuranceNumber",
              "address": {
                "*": "parties[0].addressLines",
                "postcode": "parties[0].postCode"
              }
            }
          },
          "aliases": {
            "*": {
              "firstName": "parties[0].aliases[&1].firstName",
              "middleName": "parties[0].aliases[&1].middleName",
              "lastName": "parties[0].aliases[&1].lastName",
              "title": "parties[0].aliases[&1].title",
              "legalEntityName": "parties[0].aliases[&1].organisationName"
            }
          },
          "offences": {
            "*": {
              "id": "parties[0].offences[&1].offenceId",
              "offenceCode": "parties[0].offences[&1].offenceCode",
              "offenceTitle": "parties[0].offences[&1].offenceTitle",
              "offenceLegislation": "parties[0].offences[&1].offenceLegislation",
              "proceedingsConcluded": "parties[0].offences[&1].proceedingsConcluded",
              "dateOfInformation": "parties[0].offences[&1].dateOfInformation",
              "startDate": "parties[0].offences[&1].startDate",
              "endDate": "parties[0].offences[&1].endDate",
              "arrestDate": "parties[0].offences[&1].arrestDate",
              "chargeDate": "parties[0].offences[&1].chargeDate",
              "modeOfTrial": "parties[0].offences[&1].modeOfTrial",
              "orderIndex": "parties[0].offences[&1].orderIndex",
              "wording": "parties[0].offences[&1].wording",
              "laaApplnReference": {
                "applicationReference": "parties[0].offences[&2].laaReference.applicationReference",
                "statusId": "parties[0].offences[&2].laaReference.statusId",
                "statusCode": "parties[0].offences[&2].laaReference.statusCode",
                "statusDescription": "parties[0].offences[&2].laaReference.statusDescription"
              }
            }
          },
          "associatedDefenceOrganisation": {
            "applicationReference": "parties[0].representationOrder.applicationReference",
            "associationStartDate": "parties[0].representationOrder.effectiveFromDate",
            "associationEndDate": "parties[0].representationOrder.effectiveToDate",
            "defenceOrganisation": {
              "laaContractNumber": "parties[0].representationOrder.laaContractNumber"
            }
          }
        }
      }
    },
    {
      "operation": "modify-overwrite-beta",
      "spec": {
        "parties": {
          "*": {
            "\\_party_type": "=toUpper",
            "addressLines": "=join(' ',@(1,addressLines))"
          }
        }
      }
    },
    {
      "operation": "default",
      "spec": {
        "_case_type": "PROSECUTION"
      }
    }
  ]
}
