{
   "$schema": "http://json-schema.org/draft-04/schema#",
   "type": "object",
   "properties": {
      "modifiedDate": {
         "$ref": "#/definitions/datePattern"
      },
      "updatedOffences": {
         "type": "array",
         "items": [
            {
               "type": "object",
               "properties": {
                  "defendantId": {
                     "$ref": "#/definitions/uuidPattern"
                  },
                  "caseId": {
                     "$ref": "#/definitions/uuidPattern"
                  },
                  "offences": {
                     "type": "array",
                     "items": {
                        "$ref": "#/definitions/offence"
                     }
                  }
               },
               "required": [
                  "defendantId",
                  "caseId",
                  "offences"
               ]
            }
         ]
      },
      "deletedOffences": {
         "type": "array",
         "items": [
            {
               "type": "object",
               "properties": {
                  "defendantId": {
                     "$ref": "#/definitions/uuidPattern"
                  },
                  "caseId": {
                     "$ref": "#/definitions/uuidPattern"
                  },
                  "offences": {
                     "type": "array",
                     "minItems": 1,
                     "items": {
                        "$ref": "#/definitions/uuidPattern"
                     }
                  }
               },
               "required": [
                  "defendantId",
                  "caseId",
                  "offences"
               ]
            }
         ]
      },
      "addedOffences": {
         "type": "array",
         "items": [
            {
               "type": "object",
               "properties": {
                  "defendantId": {
                     "$ref": "#/definitions/uuidPattern"
                  },
                  "caseId": {
                     "$ref": "#/definitions/uuidPattern"
                  },
                  "offences": {
                     "type": "array",
                     "items": {
                        "$ref": "#/definitions/offence"
                     }
                  }
               },
               "required": [
                  "defendantId",
                  "caseId",
                  "offences"
               ]
            }
         ]
      }
   },
               "required": [
                  "modifiedDate"
               ],
   "definitions": {
      "uuidPattern": {
         "type": "string",
         "pattern": "^[a-fA-F0-9]{8}-[a-fA-F0-9]{4}-[a-fA-F0-9]{4}-[a-fA-F0-9]{4}-[a-fA-F0-9]{12}$"
      },
      "datePattern": {
         "type": "string",
         "pattern": "^((([\\+-]?\\d{4}(?!\\d{2}\\b))\\-(0[13578]|1[02])\\-(0[1-9]|[12]\\d|3[01]))|(([\\+-]?\\d{4}(?!\\d{2}\\b))\\-(0[13456789]|1[012])\\-(0[1-9]|[12]\\d|30))|(([\\+-]?\\d{4}(?!\\d{2}\\b))\\-02\\-(0[1-9]|1\\d|2[0-8]))|(((1[6-9]|[2-9]\\d)(0[48]|[2468][048]|[13579][26])|((16|[2468][048]|[3579][26])00))\\-02\\-29))$"
      },
      "offence": {
         "type": "object",
         "properties": {
            "id": {
               "type": "string"
            },
            "offenceCode": {
               "type": "string"
            },
            "wording": {
               "type": "string"
            },
            "startDate": {
               "type": "string"
            },
            "endDate": {
               "type": "string"
            },
            "count": {
               "type": "integer"
            },
            "convictionDate": {
               "type": "string"
            },
            "statementOfOffence": {
               "type": "object",
               "properties": {
                  "title": {
                     "type": "string"
                  },
                  "legislation": {
                     "type": "string"
                  }
               },
               "required": [
                  "title",
                  "legislation"
               ]
            }
         },
         "required": [
            "id",
            "offenceCode",
            "wording",
            "startDate",
            "statementOfOffence"
         ]
      }
   },
   "anyOf": [
      {
         "required": [
            "updatedOffences"
         ]
      },
      {
         "required": [
            "deletedOffences"
         ]
      },
      {
         "required": [
            "addedOffences"
         ]
      }
   ]
}