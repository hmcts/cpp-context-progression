{
  "$schema": "http://json-schema.org/draft-04/schema#",
  "id": "http://justice.gov.uk/courts/progression/query/progression.query.prosecutioncase.caag",
  "type": "object",
  "properties": {
    "caseId": {
      "type": "string"
    },
    "caseDetails": {
      "description": "Describes the case details",
      "type": "object",
      "properties": {
        "caseURN": {
          "type": "string"
        },
        "caseStatus": {
          "type": "string"
        },
        "removalReason": {
          "type": "string"
        },
        "initiationCode": {
          "type": "string"
        },
        "caseMarkers": {
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "relatedReferenceList": {
          "type": "array",
          "items": {
            "$ref": "http://justice.gov.uk/progression/query/related-reference.json"
          }
        }
      }
    },
    "prosecutorDetails": {
      "type": "object",
      "$ref": "#/definitions/prosecutorDetails"
    },
    "defendants": {
      "type": "array",
      "minItems": 1,
      "items": {
        "$ref": "#/definitions/caagDefendant"
      }
    },
    "linkedApplications": {
      "type": "array",
      "minItems": 1,
      "items": {
        "$ref": "#/definitions/applicationSummary"
      }
    }
  },
  "additionalProperties": false,
  "required": [
    "caseId",
    "caseDetails",
    "prosecutorDetails",
    "defendants"
  ],
  "definitions": {
    "prosecutorDetails": {
      "type": "object",
      "properties": {
        "prosecutionAuthorityReference": {
          "type": "string"
        },
        "prosecutionAuthorityCode": {
          "type": "string"
        },
        "oldProsecutionAuthorityCode": {
          "type": "string"
        },
        "prosecutionAuthorityId": {
          "$ref": "http://justice.gov.uk/domain/core/common/definitions.json#/definitions/uuid"
        },
        "address": {
          "$ref": "http://justice.gov.uk/core/courts/address.json#"
        },
        "isCpsOrgVerifyError": {
          "type": "boolean"
        }
      },
      "additionalProperties": false
    },
    "caagDefendant": {
      "type": "object",
      "properties": {
        "id": {
          "$ref": "http://justice.gov.uk/domain/core/common/definitions.json#/definitions/uuid"
        },
        "masterDefendantId": {
          "$ref": "http://justice.gov.uk/domain/core/common/definitions.json#/definitions/uuid"
        },
        "firstName": {
          "type": "string"
        },
        "lastName": {
          "type": "string"
        },
        "address": {
          "$ref": "http://justice.gov.uk/core/courts/address.json#"
        },
        "dateOfBirth": {
          "$ref": "http://justice.gov.uk/core/courts/courtsDefinitions.json#/definitions/datePattern"
        },
        "age": {
          "type": "integer"
        },
        "nationality": {
          "type": "string"
        },
        "interpreterLanguageNeeds": {
          "type": "string"
        },
        "remandStatus": {
          "type": "string"
        },
        "ctlExpiryDate": {
          "$ref": "http://justice.gov.uk/core/courts/courtsDefinitions.json#/definitions/datePattern"
        },
        "ctlExpiryCountDown": {
          "type": "integer"
        },
        "defendantMarkers": {
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "representation": {
          "description": "The organisation details of the defence representation",
          "$ref": "http://justice.gov.uk/core/courts/organisation.json"
        },
        "legalAidStatus": {
          "type": "string"
        },
        "legalEntityDefendant": {
          "description": "When the defendant is a legal entity the additional legal entity specific details for the defendant",
          "$ref": "#/definitions/caagOrganisation"
        },
        "caagDefendantOffences": {
          "type": "array",
          "minItems": 1,
          "items": {
            "$ref": "#/definitions/caagDefendantOffence"
          }
        },
        "defendantJudicialResults": {
          "description": "defendant level results",
          "type": "array",
          "minItems": 1,
          "items": {
            "$ref": "http://justice.gov.uk/core/courts/judicialResult.json"
          }
        },
        "defendantCaseJudicialResults": {
          "description": "A record of any judicial decisions and results made against the defendant on a given case i.e. defendantCase results",
          "type": "array",
          "minItems": 1,
          "items": {
            "$ref": "http://justice.gov.uk/core/courts/judicialResult.json"
          }
        },
        "pncId": {
          "type": "string"
        },
        "arrestSummonsNumber": {
          "type": "string"
        },
        "driverNumber": {
          "type": "string"
        },
        "gender": {
          "$ref": "http://justice.gov.uk/core/courts/courtsDefinitions.json#/definitions/gender"
        }
      },
      "required": [
        "id",
        "masterDefendantId",
        "firstName",
        "lastName"
      ],
      "additionalProperties": false
    },
    "caagDefendantOffence": {
      "type": "object",
      "properties": {
        "id": {
          "$ref": "http://justice.gov.uk/domain/core/common/definitions.json#/definitions/uuid"
        },
        "offenceCode": {
          "type": "string"
        },
        "offenceTitle": {
          "type": "string"
        },
        "indictmentParticular": {
          "type": "string"
        },
        "offenceTitleWelsh": {
          "type": "string"
        },
        "offenceLegislation": {
          "type": "string"
        },
        "offenceLegislationWelsh": {
          "type": "string"
        },
        "wording": {
          "type": "string"
        },
        "wordingWelsh": {
          "type": "string"
        },
        "startDate": {
          "$ref": "http://justice.gov.uk/core/courts/courtsDefinitions.json#/definitions/datePattern"
        },
        "endDate": {
          "$ref": "http://justice.gov.uk/core/courts/courtsDefinitions.json#/definitions/datePattern"
        },
        "count": {
          "$ref": "http://justice.gov.uk/core/courts/courtsDefinitions.json#/definitions/positiveInteger"
        },
        "allocationDecision": {
          "$ref": "http://justice.gov.uk/core/courts/allocationDecision.json"
        },
        "plea": {
          "$ref": "http://justice.gov.uk/core/courts/plea.json"
        },
        "verdict": {
          "$ref": "http://justice.gov.uk/core/courts/verdict.json"
        },
        "caagResults": {
          "description": "offence level results",
          "type": "array",
          "minItems": 1,
          "items": {
            "$ref": "#/definitions/caagResult"
          }
        },
        "custodyTimeLimit": {
          "$ref": "http://justice.gov.uk/core/courts/custodyTimeLimit.json"
        },
        "reportingRestrictions": {
          "description": "Reporting restrictions",
          "type": "array",
          "minItems": 1,
          "items": {
            "$ref": "http://justice.gov.uk/core/courts/reportingRestriction.json"
          }
        }
      },
      "required": [
        "id",
        "offenceCode",
        "offenceTitle",
        "wording",
        "startDate"
      ],
      "additionalProperties": false
    },
    "caagResult": {
      "type": "object",
      "properties": {
        "id": {
          "$ref": "http://justice.gov.uk/domain/core/common/definitions.json#/definitions/uuid"
        },
        "label": {
          "type": "string"
        },
        "caagResultPrompts": {
          "type": "array",
          "minItems": 1,
          "items": {
            "$ref": "#/definitions/caagResultPrompt"
          }
        },
        "usergroups": {
          "description": "The user groups that are not authorised to view the result",
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "orderedDate": {
          "$ref": "http://justice.gov.uk/core/courts/courtsDefinitions.json#/definitions/datePattern"
        },
        "lastSharedDateTime": {
          "type": "string"
        },
        "amendmentDate": {
          "$ref": "http://justice.gov.uk/core/courts/courtsDefinitions.json#/definitions/datePattern"
        },
        "amendmentReason": {
          "type": "string"
        },
        "amendedBy": {
          "type": "string"
        }
      },
      "required": [
        "id",
        "label"
      ],
      "additionalProperties": false
    },
    "caagResultPrompt": {
      "type": "object",
      "properties": {
        "label": {
          "type": "string"
        },
        "value": {
          "type": "string"
        },
        "usergroups": {
          "description": "The user groups that are not authorised to view the result",
          "type": "array",
          "items": {
            "type": "string"
          }
        }
      },
      "required": [
        "label",
        "value"
      ],
      "additionalProperties": false
    },
    "applicationSummary": {
      "type": "object",
      "properties": {
        "applicationId": {
          "$ref": "http://justice.gov.uk/domain/core/common/definitions.json#/definitions/uuid"
        },
        "applicationTitle": {
          "type": "string"
        },
        "applicationReference": {
          "description": "The human readable reference for the application.  For linked applications this will be the case urn or the prosecution authority reference suffixed with a numerical sequence",
          "type": "string"
        },
        "applicationStatus": {
          "description": "Indicates if the application is draft, listed or resulted",
          "type": "string"
        },
        "removalReason": {
          "description": "Removal reason if application is ejected",
          "type": "string"
        },
        "applicantDisplayName": {
          "type": "string"
        },
        "applicantId": {
          "$ref": "http://justice.gov.uk/domain/core/common/definitions.json#/definitions/uuid"
        },
        "respondentDisplayNames": {
          "type": "array",
          "minItems": 0,
          "items": {
            "type": "string"
          }
        },
        "respondentIds": {
          "type": "array",
          "minItems": 0,
          "items": {
            "$ref": "http://justice.gov.uk/domain/core/common/definitions.json#/definitions/uuid"
          }
        },
        "subjectId": {
          "$ref": "http://justice.gov.uk/domain/core/common/definitions.json#/definitions/uuid"
        },
        "isAppeal": {
          "type": "boolean"
        }
      },
      "additionalProperties": false
    },
    "caagOrganisation": {
      "type": "object",
      "properties": {
        "name": {
          "type": "string"
        },
        "address": {
          "$ref": "http://justice.gov.uk/core/courts/address.json#"
        }
      },
      "required": [
        "name"
      ],
      "additionalProperties": false
    }
  }
}